<html>
<head>
<title>Prime Hiring</title>
<link rel="stylesheet" href="style.css">
<script src="https://code.jquery.com/jquery-3.3.1.js" ></script>
<script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js" ></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://use.fontawesome.com/fbd756c4cb.js"></script>
<link href="https://unpkg.com/bootstrap-table@1.19.1/dist/bootstrap-table.min.css" rel="stylesheet">
<script src="https://unpkg.com/bootstrap-table@1.19.1/dist/bootstrap-table.min.js"></script>
<script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
<link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />
</head>

<body>

  <img src="logo.png" class="img-fluid" id="logo"/>
 
  <div class="navig">
  <nav>
    <div class="nav nav-tabs" id="nav-tab" role="tablist">
      <a class="nav-item nav-link active" id="nav-manage-tab" data-toggle="tab" href="#nav-manage" role="tab" aria-controls="nav-manage" aria-selected="true">Manage</a>
      <a class="nav-item nav-link" id="nav-hire-tab" data-toggle="tab" href="#nav-hire" role="tab" aria-controls="nav-hire" aria-selected="false">Hire</a>
      <a class="nav-item nav-link" id="nav-assigned-tab" data-toggle="tab" href="#nav-assigned" role="tab" aria-controls="nav-assigned" aria-selected="false">Assigned</a>
    </div>
  </nav>
  <div class="tab-content" id="nav-tabContent">
    <div class="tab-pane fade show active" id="nav-manage" role="tabpanel" aria-labelledby="nav-manage-tab"> 
     
      <div id="toolbar">
        <button id="add" class="btn btn-secondary" data-toggle="modal" data-target="#exampleModal">
          <i class="fa fa-user-plus fa-lg" aria-hidden="true"></i> Add Developer
        </button>
        
      </div>


      <!-- Add a developer modal-->
      <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Add new developer</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              ...
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Submit</button>
            </div>
          </div>
        </div>
      </div>

      <!-- MANAGE -->
      <!--<div class="table-responsive"> -->
      <table id="table1"
      data-toggle="table"
      data-show-toggle="true"
      data-url="http://localhost/PrimeHiring/getDevelopers.php"
      data-height="400" data-show-columns="true"
      data-show-refresh="true"
      data-icons="icons"
      class="table table-hover table-borderless"> 
        <thead class="thead-dark">
          <tr>
            <th data-formatter="operateFormatter" data-events="operateEvents" style="align-content: center;">Manage</th>
            <th data-field="Name" >Name</th>
            <th data-field="Email">Email</th>
            <th data-field="PhoneNum">PhoneNum</th>

            <th data-field="Location">Location</th>

            <th data-field="Picture" data-formatter="imageFormatter">Picture</th>
            <th data-field="PricePerHour">PricePerHour</th>

            <th data-field="Technology">Technology</th>
            <th data-field="Description" class="abbreviation">Description</th>
            <th data-field="YearsOfExp">YearsOfExp</th>
            <th data-field="NativeLang">NativeLang</th>
          </tr>
      </thead>
      </table>
      <!-- </div> -->
    
    </div>

    <!-- HIRE 
      
      -- do / show only devs that can be hired in a date range selected

    --> 
    <div class="tab-pane fade" id="nav-hire" role="tabpanel" aria-labelledby="nav-hire-tab">
           
      
      <table id="table2"
      data-toggle="table"
      data-show-toggle="true"
      data-click-to-select="true"
      data-multiple-select-row="true"
      data-show-refresh="true"
      data-url=""
      data-height="400" data-show-columns="true"
      data-icons="icons"
      class="table table2 table-hover table-borderless">
      <thead class="thead-dark">
      <tr>
        <th data-field="state" data-checkbox="true"></th>
        <th data-field="Name">Name</th>
        <th data-field="Email">Email</th>
        <th data-field="PhoneNum">PhoneNum</th>

        <th data-field="Location">Location</th>

        <th data-field="Picture" data-formatter="imageFormatter">Picture</th>
        <th data-field="PricePerHour">PricePerHour</th>

        <th data-field="Technology">Technology</th>
        <th data-field="Description" class="abbreviation">Description</th>
        <th data-field="YearsOfExp">YearsOfExp</th>
        <th data-field="NativeLang">NativeLang</th>
      </tr>
      </thead>
      </table>

      <div id="toolbar2">
        <div class="container" style="position: relative; top: -250px; left:-28%">
          Start Date: <input id="startDate" width="170" /> End Date: <input id="endDate" width="170" />
          <br>
        <button id="hire" class="btn btn-dark" >
          <i class="fa fa-handshake-o fa-lg" aria-hidden="true"></i> Hire
        </button>
        
        
       
      </div>
      </div>
    </div>

    <!-- ASSIGN -->
    <div class="tab-pane fade" id="nav-assigned" role="tabpanel" aria-labelledby="nav-assigned-tab">
      

      <table id="table3"
      data-toggle="table"
      data-show-toggle="true"
      data-show-refresh="true"
      data-url="http://localhost/PrimeHiring/getRecords.php"
      data-height="400" data-show-columns="true"
      data-icons="icons"
      class="table table-hover table-borderless"> 
        <thead class="thead-dark">
          <tr>
            <th data-field="recordId" >Record ID</th>
            <th data-field="developerId">Developer ID</th>
            <th data-field="Name">Developer's Name</th>
            <th data-field="startDate">Start Date</th>
            <th data-field="endDate">End Date</th>

          </tr>
      </thead>
      </table>
    </div>
  </div>
</div>
<div class="footer fixed-bottom" style="margin: auto;width:57%;display: flex;justify-content: center;bottom:10;border-top:1px solid rgb(196, 196, 196); ">Demir Dazdarevic, 2022</div>   



<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/holder/2.6.0/holder.js"></script>


<script>

window.icons = {
    paginationSwitchDown: 'fa-caret-square-down',
    paginationSwitchUp: 'fa-caret-square-up',
    refresh: 'fa fa-refresh',
    toggleOff: 'fa-toggle-off',
    toggleOn: 'fa-toggle-on',
    columns: 'fa-th-list',
    fullscreen: 'fa-arrows-alt',
    detailOpen: 'fa-plus',
    detailClose: 'fa-minus'
  };

  

var $table1 = $('#table1');
var $table = $('#table2');
var $table3 = $('#table3');
var $remove = $('#hire');
var $refresh = $('#refresh');

$(document).ready(function() {
  $(".table2").attr("data-url","http://localhost/PrimeHiring/getAvailable.php?start=%27"+ $('#startDate').val() +"%27");
  $table.bootstrapTable('refresh');
  $refresh.click(function () {
      $table.bootstrapTable('refresh');
      $table1.bootstrapTable('refresh');
      $table3.bootstrapTable('refresh');
    })
});



function getDate() {
  return $('#startDate').val();
}


window.operateEvents = {
    'click .edit': function (e, value, row, index) {
      alert('You click like action, row: ' + JSON.stringify(row))
    },
    'click .remove': function (e, value, row, index) {
      //ajax request to delete in db
      $.get( "http://localhost/PrimeHiring/deleteDeveloper.php?id="+row['id'] , function( data ) {
        alert( "Deleted."+data );
        }); 
      $table1.bootstrapTable('remove', {
        field: '$index',
        values: [index]
      })
    }
  }

 var today = new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate());
  $('#startDate').datepicker({
      uiLibrary: 'bootstrap4',
      iconsLibrary: 'fontawesome',
      minDate: today,
      format: 'yyyy-mm-dd',
      maxDate: function () {
          return $('#endDate').val();
      },  // on click..post request to php..get developers and list them
      change: function (e) {
        $table.bootstrapTable('refresh', {
          url: "http://localhost/PrimeHiring/getAvailable.php?start=%27"+ $('#startDate').val() +"%27"
        });
      }

  });
  $('#endDate').datepicker({
      uiLibrary: 'bootstrap4',
      iconsLibrary: 'fontawesome',
      format: 'yyyy-mm-dd',
      minDate: function () {
          return $('#startDate').val();
      },  // on click..post request to php..get developers and list them
      change: function (e) {
        //$(".table2").attr("data-url","http://localhost/PrimeHiring/getAvailable.php?start=%27"+ $('#startDate').val() +"%27");
        $table.bootstrapTable('refresh', {
          url: "http://localhost/PrimeHiring/getAvailable.php?start=%27"+ $('#startDate').val() +"%27"
        });
        //validate($(this).val());
        }
  });


function validate(dateText){
try {
  alert("You selected is : "+ $("#endDate").val($.datepicker.formatDate('yy-mm-dd', new Date())));
  } 
catch (e) {
  alert("invalid date");
}; 
}

function imageFormatter(value, row) {
      return '<img src="'+value+'"style="width:100px;height:100px;border-radius: 50%;"/>';
    }

function operateFormatter(value, row, index) {
return [
  '<a class="edit" href="javascript:void(0)" title="Edit">',
  '<i class="fa fa-pencil fa-lg"></i>',
  '</a>  <br><br> ',
  '<a class="remove" href="javascript:void(0)" title="Remove">',
  '<i class="fa fa-trash fa-lg"></i>',
  '</a>'
].join('')
}

   
</script>
</body>
</html>